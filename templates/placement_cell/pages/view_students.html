 {% extends "placement_cell/pc_base.html" %}
 {% load static %}
 {% block content %}

<!-- ========== VIEW STUDENTS PAGE ========== -->
            <div id="page-view-students" class="dashboard-page">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-user-graduate me-2"></i>View Students</h5>
                        <div class="input-group" style="width: 300px;">
                            <input type="text" class="form-control form-control-sm" placeholder="Search students..." id="studentSearch">
                            <button class="btn btn-outline-secondary btn-sm" type="button">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Branch</th>
                                        <th>Enrollment No.</th>

                                        <th>CGPA</th>
                                        <th>Resume</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for student in students  %}
                                    <tr>
                                        <td>{{ student.user.get_full_name }}</td>
                                        <td>{{ student.course }}</td>
                                        <td>{{ student.enroll_number }}</td>
                                        <td> {{ student.cgpa }}</td>
                                        <td>

                                            {% comment %} <span class="badge bg-success">Available</span> {% endcomment %}

                                            {% if student.resume %}

                                            <a href="{{ student.resume.url }}" target="_blank" class="btn btn-sm btn-info me-1">
                                                <i class="fas fa-eye me-1"></i>View Resume
                                            </a>

                                            <a href="{{ student.resume.url }}" download class="btn btn-sm btn-primary">
                                            <i class="fas fa-download me-1"></i>Download Resume
                                            </a>
                                            {% else %}
                                            <span class="badge bg-danger">No Resume</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            
                                             <button 
                                                class="btn btn-sm btn-outline-primary flex-grow-1 view-studentdetails-btn btn-hover-ripple"
                                                data-name="{{ student.user.get_full_name }}"
                                                data-email="{{ student.user.email }}"
                                                data-phone="{{ student.phone }}"
                                                data-branch="{{ student.course }}"
                                                data-cgpa="{{ student.cgpa }}"
                                                data-skills="{{ student.skills }}"
                                                data-photo="{% if student.passport_photo %}{{ student.passport_photo.url }}{% endif %}"
                                                data-linkedin="{{ student.linkedin }}"
                                                data-github="{{ student.github }}"
                                                data-portfolio="{{ student.portfolio }}"
                                                data-resume="{% if student.resume %}{{ student.resume.url }}{% endif %}"
                                                data-bs-toggle="modal"
                                                data-bs-target="#studentProfileModal">
                                                View Details
                                            </button>
                                            <form method="POST" action="{% url 'placement_cell:delete_student' student.id %}" style="display:inline;">
                                                    {% csrf_token %}

                                            <button type="submit" class="btn btn-sm btn-danger delete-student" data-student-id="{{ student.user.get_full_name }}" data-student-enrollment="{{ student.get_enroll_number }}" onclick="return confirm('Are you sure you want to delete this student?');">
                                                <i class="fas fa-times me-1"></i>Remove
                                            </button>
                                        </td>
                                    </tr>
                                    {% empty %}
                                        <tr>
        <td colspan="6" class="text-center">No Students Found</td>
    </tr>
    {% endfor %}
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

    {% endblock content %}